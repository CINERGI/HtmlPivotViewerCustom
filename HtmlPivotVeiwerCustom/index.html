<!DOCTYPE html>
<html>
<head>
    <title>HTML 5 PivotViewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link href="style/pivotviewer.css" rel="stylesheet" type="text/css" />
    <link href="style/bootstrap.css" rel="stylesheet" type="text/css" />
    <!--[if lt IE 9]>
        <script src="lib/jquery/jquery-1.11.2.min.js" type="text/javascript"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
    <script src="lib/jquery/jquery-2.1.3.min.js"></script>
    <!--<![endif]-->

    <!-- ocpu library -->
    <script src="lib/opencpu-0.5.js"> </script>

    <script src="lib/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>

    <script src='https://www.google.com/jsapi'></script>

    <script src="lib/modernizr/modernizr.custom.93916.js" type="text/javascript"></script>
    <script src="lib/easing/easing.min.js" type="text/javascript"></script>
    <script src="lib/jquery.mousewheel/jquery.mousewheel.min.js" type="text/javascript"></script>

    <script src="lib/csvToArray.v2.1.min.js" type="text/javascript"></script>
    <script src="lib/moment.min.js" type="text/javascript"></script>
    <script src="lib/moment.parseFormat.min.js" type="text/javascript"></script>
    <script src="lib/jbinary.js" type="text/javascript"></script>
    <script src="lib/jszip.min.js" type="text/javascript"></script>
    <script src="lib/semaphore.min.js" type="text/javascript"></script>
    <script src="lib/lawnchair.min.js" type="text/javascript"></script>
    <script src="lib/URI.js" type="text/javascript"></script>

    <script src="src/namespaces.min.js" type="text/javascript"></script>
    <script src="src/pubsub.min.js" type="text/javascript"></script>
    <script src="src/utils.js" type="text/javascript"></script>
    <script src="src/models.min.js" type="text/javascript"></script>
    <script src="src/collectionloader.min.js" type="text/javascript"></script>
    <script src="src/views/ipivotviewerview.min.js" type="text/javascript"></script>
    <script src="src/views/tilebasedview.min.js" type="text/javascript"></script>
    <script src="src/views/iimagecontroller.min.js" type="text/javascript"></script>
    <script src="src/views/tilecontroller.min.js" type="text/javascript"></script>
    <script src="src/views/deepzoom.min.js" type="text/javascript"></script>
    <script src="src/pivotviewer.js" type="text/javascript"></script>
    <script src="src/csvloader.min.js" type="text/javascript"></script>
    <script src="src/rloader.js" type="text/javascript"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</head>
<body>
    <div id="pivotviewer"></div>
    <script type="text/javascript">
        var debug = false, url = URI.parse(window.location.href);
        var options = {};
        if (url.query != null) {
            var query = URI.parseQuery(url.query);
            if (query.file != undefined) {
                if (query.file.endsWith(".csv") || query.type == "csv") options.Loader = new PivotViewer.Models.Loaders.CSVLoader("projects/" + query.file);
                else options.Loader = new PivotViewer.Models.Loaders.CXMLLoader("projects/" + query.file);
            }
            options.View = query.view;
        }
        //TODO: change the file path when server's up
        initRSession("http://132.249.238.135/projects/"+query.file);
        $(document).ready(function () { $('#pivotviewer').PivotViewer(options); });
    </script>
</body>
</html>
